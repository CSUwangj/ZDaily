<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <!-- viewport-fit=cover is to support iPhone X rounded corners and notch in landscape-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=10, viewport-fit=cover">

      <title>CSUwangj&#x27;s daily challenge</title>

      <!-- CSS -->
      <link rel="stylesheet" href="https://csuwangj.github.io/ZDaily/css/lib/font-awesome.min.css">
      <link rel="stylesheet" href="https://csuwangj.github.io/ZDaily/site.css">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alegreya+Sans|Noto+Serif+SC">
      
      <!-- js -->
      <script type="text/javascript" charset="utf-8" src="https://csuwangj.github.io/ZDaily/js/sidebar.js"></script>
      

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css" crossorigin="anonymous">
<script type="module">
import renderMathInElement from "https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/auto-render.mjs";
const katex_config = {
  delimiters: [
    { left: "$$", right: "$$", display: true },
    { left: "$", right: "$", display: false },
  ],
  macros: {
    // Functions
    arccot: '\\operatorname{arccot}',
    arcsec: '\\operatorname{arcsec}',
    arccsc: '\\operatorname{arccsc}',
  }
}
renderMathInElement(document.body, katex_config);
</script>


      

      
        <link rel="alternate" type="application/rss+xml" title="RSS" href="https://csuwangj.github.io/ZDaily/rss.xml">
      
      

      
      
    </head>

    <body>
      
      
        <header name="header">
          <div>
            <div class="logo"><a href="https:&#x2F;&#x2F;csuwangj.github.io&#x2F;ZDaily&#x2F;">ZDaily</a></div>
            <nav class="menu">
              
                <a href="https:&#x2F;&#x2F;csuwangj.github.io&#x2F;ZDaily&#x2F;" class="nav-item-home unselectable">
                  <span><i class="fa-solid fa-house"></i> Home</span>
                </a>
              
                <a href="https:&#x2F;&#x2F;csuwangj.github.io&#x2F;ZDaily&#x2F;about" class="nav-item-about unselectable">
                  <span><i class="fa-solid fa-user-circle"></i> About</span>
                </a>
              
                <a href="https:&#x2F;&#x2F;csuwangj.github.io&#x2F;ZDaily&#x2F;categories" class="nav-item-categories unselectable">
                  <span><i class="fa-solid fa-book"></i> Categories</span>
                </a>
              
                <a href="https:&#x2F;&#x2F;csuwangj.github.io&#x2F;ZDaily&#x2F;tags" class="nav-item-tags unselectable">
                  <span><i class="fa-solid fa-tags"></i> Tags</span>
                </a>
              
                <a href="https:&#x2F;&#x2F;csuwangj.github.io&#x2F;ZDaily&#x2F;archives" class="nav-item-archives unselectable">
                  <span><i class="fa-solid fa-inbox"></i> Archives</span>
                </a>
              
              
            </nav>
          </div>
        </header>
      

      <main class="content container" name="main">
        <div class="content-wrapper">
          
  <div class="post">
    <h1 class="post-title">2021-02-28 Daily-Challenge</h1>
    <div class="post-meta">
      
        <span class="post-meta-divider">|</span>
        <span class="post-meta-item-icon"><i class="fa-solid fa-calendar"></i></span>
        <span class="post-date">Posted on: </span>
        <time datetime=2021-02-28T13:44:36+08:00 title="post created">2021-02-28</time>
      
      
        <span class="post-meta-divider">|</span>
        <span class="post-meta-item-icon"><i class="fa-solid fa-calendar-check"></i></span>
        <span class="modify-date">Posted modified: </span>
        <time datetime=2021-02-28T20:28:26+08:00 title="post modified">2021-02-28</time>
      
      
        <span class="post-meta-divider">|</span>
        <span class="post-meta-item-icon"><i class="fa-solid fa-folder"></i></span>
        <span class="in-category">In: </span>
          
            <a class="category" href="/category/DailyChallenge">DailyChallenge</a>
          
      
      <span class="post-meta-divider">|</span>
    </div>
    <div class="post-body">
      <p>Today is Sunday, I gonna review the tasks I've done this week, and finish today's leetcode's <a href="https://leetcode.com/explore/challenge/card/february-leetcoding-challenge-2021/587/week-4-february-22nd-february-28th/3654/">February LeetCoding Challenge</a> with <code>cpp</code>.</p>
<span id="continue-reading"></span><h1 id="leetcode-review">LeetCode Review</h1>
<h2 id="furthest-building-you-can-reach">Furthest Building You Can Reach</h2>
<pre data-lang="cpp" class="language-cpp "><code class="language-cpp" data-lang="cpp">class Solution {
public:
    int furthestBuilding(vector&lt;int&gt;&amp; heights, int bricks, int ladders) {
        priority_queue&lt;int&gt; q;
        int len = heights.size();
        for(int i = 0; i &lt; len - 1; ++i) {
            if(heights[i] &lt; heights[i + 1]) {
                q.push(heights[i] - heights[i + 1]);
            }
            if(q.size() &gt; ladders) {
                bricks += q.top();
                q.pop();
            }
            if(bricks &lt; 0) return i;
        }
        return len - 1;
    }
};
</code></pre>
<h2 id="smallest-subsequence-of-distinct-characters">Smallest Subsequence of Distinct Characters</h2>
<pre data-lang="cpp" class="language-cpp "><code class="language-cpp" data-lang="cpp">class Solution {
public:
    string smallestSubsequence(string s) {
        vector&lt;int&gt; cnt(26);
        for(auto c : s) cnt[c - &#x27;a&#x27;] += 1;
        vector&lt;bool&gt; used(26);
        string answer;
        for(auto c : s) {
            if(used[c - &#x27;a&#x27;]) {
                cnt[c - &#x27;a&#x27;] -= 1;
                continue;
            }
            while(answer.length() &amp;&amp; answer.back() &gt; c &amp;&amp; cnt[answer.back() - &#x27;a&#x27;]) {
                used[answer.back() - &#x27;a&#x27;] = false;
                answer.pop_back();
            }
            answer.push_back(c);
            used[c - &#x27;a&#x27;] = true;
            cnt[c - &#x27;a&#x27;] -= 1;
        }
        return answer;
    }
};
</code></pre>
<h2 id="delete-nodes-and-return-forest">Delete Nodes And Return Forest</h2>
<pre data-lang="cpp" class="language-cpp "><code class="language-cpp" data-lang="cpp">class Solution {
    TreeNode* delRoot(TreeNode *root, vector&lt;TreeNode*&gt; &amp;answer, unordered_set&lt;int&gt; &amp;to_delete) {
        if(!root) return nullptr;
        root-&gt;left = delRoot(root-&gt;left, answer, to_delete);
        root-&gt;right = delRoot(root-&gt;right, answer, to_delete);
        if(to_delete.count(root-&gt;val)) {
            if(root-&gt;left) answer.push_back(root-&gt;left);
            if(root-&gt;right) answer.push_back(root-&gt;right);
            return nullptr;
        }
        return root;
    }
public:
    vector&lt;TreeNode*&gt; delNodes(TreeNode* root, vector&lt;int&gt;&amp; to_delete) {
        vector&lt;TreeNode*&gt; answer;
        unordered_set&lt;int&gt; st(to_delete.begin(), to_delete.end());
        if(delRoot(root, answer, st)) answer.push_back(root);
        return move(answer);
    }
};
</code></pre>
<h2 id="bulb-switcher-iii">Bulb Switcher III</h2>
<p>too easy to review</p>
<h2 id="dungeon-game">Dungeon Game</h2>
<p>dp forward cannot form a optimal structure, because maximum current HP does not mean maximum historical HP. take an example</p>
<table><tbody>
    <tr>
        <td>0</td>
        <td>-5</td>
        <td>100</td>
    </tr>
    <tr>
        <td>-1</td>
        <td>1</td>
        <td>0</td>
    </tr>
</tbody></table>
<p>but if we dp backwords, we can get a optimal structure. instead of finding path towards destination, we try to find the way from the princess to knight. we keep track of minimum HP needed for pass through the rest of path.</p>
<pre data-lang="cpp" class="language-cpp "><code class="language-cpp" data-lang="cpp">class Solution {
public:
    int calculateMinimumHP(vector&lt;vector&lt;int&gt;&gt;&amp; dungeon) {
        int rows = dungeon.size();
        int cols = dungeon.front().size();
        if(dungeon.back().back() &gt; 0) dungeon.back().back() = 0;
        for(int row = rows - 1; row &gt;= 0; row -= 1) {
            for(int col = cols - 1; col &gt;= 0; col -= 1) {
                if(col == cols - 1 &amp;&amp; row == rows - 1) continue;
                int maxDown = row == rows - 1 ? INT_MIN : dungeon[row + 1][col];
                int maxRight = col == cols - 1 ? INT_MIN : dungeon[row][col + 1];
                int target = max(maxDown, maxRight) + dungeon[row][col];
                dungeon[row][col] = target &lt; 0 ? target : 0;
            }
        }
        return dungeon.front().front() &lt; 1 ? 1 - dungeon.front().front() : 1;
    }
};

</code></pre>
<h1 id="february-leetcoding-challenge-28">February LeetCoding Challenge 28</h1>
<h2 id="description">Description</h2>
<p><strong>Maximum Frequency Stack</strong></p>
<p>Implement <code>FreqStack</code>, a class which simulates the operation of a stack-like data structure.</p>
<p><code>FreqStack</code> has two functions:</p>
<ul>
<li>
<p><code>push(int x)</code>, which pushes an integer <code>x</code> onto the stack.</p>
</li>
<li>
<p><code>pop()</code>, which removes and returns the most frequent element in the stack.</p>
<ul>
<li>If there is a tie for most frequent element, the element closest to the top of the stack is removed and returned.</li>
</ul>
</li>
</ul>
<p><strong>Example 1:</strong></p>
<pre><code>Input: 
[&quot;FreqStack&quot;,&quot;push&quot;,&quot;push&quot;,&quot;push&quot;,&quot;push&quot;,&quot;push&quot;,&quot;push&quot;,&quot;pop&quot;,&quot;pop&quot;,&quot;pop&quot;,&quot;pop&quot;],
[[],[5],[7],[5],[7],[4],[5],[],[],[],[]]
Output: [null,null,null,null,null,null,null,5,7,5,4]
Explanation:
After making six .push operations, the stack is [5,7,5,7,4,5] from bottom to top.  Then:

pop() -&gt; returns 5, as 5 is the most frequent.
The stack becomes [5,7,5,7,4].

pop() -&gt; returns 7, as 5 and 7 is the most frequent, but 7 is closest to the top.
The stack becomes [5,7,5,4].

pop() -&gt; returns 5.
The stack becomes [5,7,4].

pop() -&gt; returns 4.
The stack becomes [5,7].
</code></pre>
<p><strong>Note:</strong></p>
<ul>
<li>Calls to <code>FreqStack.push(int x)</code> will be such that <code>0 &lt;= x &lt;= 10^9</code>.</li>
<li>It is guaranteed that <code>FreqStack.pop()</code> won't be called if the stack has zero elements.</li>
<li>The total number of <code>FreqStack.push</code> calls will not exceed <code>10000</code> in a single test case.</li>
<li>The total number of <code>FreqStack.pop</code> calls will not exceed <code>10000</code> in a single test case.</li>
<li>The total number of <code>FreqStack.push</code> and <code>FreqStack.pop</code> calls will not exceed <code>150000</code> across all test cases.</li>
</ul>
<h2 id="solution">Solution</h2>
<p>I first come up with a solution using list and insert, just like <a href="https://leetcode.com/problems/lru-cache/">LRU Cache</a></p>
<pre data-lang="cpp" class="language-cpp "><code class="language-cpp" data-lang="cpp">class FreqStack {
    unordered_map&lt;int, vector&lt;list&lt;pair&lt;int, int&gt;&gt;::iterator&gt;&gt; pos;
    list&lt;pair&lt;int, int&gt;&gt; count;
public:
    FreqStack() {}
    
    void push(int x) {
        int sz = pos[x].size();
        auto p = make_pair(sz, x);
        auto it = lower_bound(count.begin(), count.end(), p, [](const pair&lt;int, int&gt; &amp;a, const pair&lt;int, int&gt; &amp;b) {
            return a.first &gt; b.first;
        });
        it = count.insert(it, p);
        pos[x].push_back(it);
    }
    
    int pop() {
        int result = count.front().second;
        count.pop_front();
        pos[result].pop_back();
        return result;
    }
};

&#x2F;&#x2F; 37 &#x2F; 37 test cases passed, but took too long.
&#x2F;&#x2F; Status: Time Limit Exceeded
&#x2F;&#x2F; Submitted: 20 minutes ago
</code></pre>
<p>then I'm trying to optimize this solution</p>
<p>I found that iterator is useless</p>
<pre data-lang="cpp" class="language-cpp "><code class="language-cpp" data-lang="cpp">class FreqStack {
    unordered_map&lt;int, int&gt; pos;
    list&lt;pair&lt;int, int&gt;&gt; count;
public:
    FreqStack() {}
    
    void push(int x) {
        int sz = pos[x];
        auto p = make_pair(sz, x);
        auto it = lower_bound(count.begin(), count.end(), p, [](const pair&lt;int, int&gt; &amp;a, const pair&lt;int, int&gt; &amp;b) {
            return a.first &gt; b.first;
        });
        it = count.insert(it, p);
        pos[x] += 1;
    }
    
    int pop() {
        int result = count.front().second;
        count.pop_front();
        pos[result] -= 1;
        return result;
    }
};

&#x2F;&#x2F; 37 &#x2F; 37 test cases passed, but took too long.
&#x2F;&#x2F; Status: Time Limit Exceeded

</code></pre>
<p>I thought pair was too slow</p>
<pre data-lang="cpp" class="language-cpp "><code class="language-cpp" data-lang="cpp">class FreqStack {
    struct p {
        int size;
        int value;
        bool operator &lt;(const p &amp;other) const {
            return this-&gt;size &gt; other.size;
        }
    };
    unordered_map&lt;int, int&gt; pos;
    list&lt;p&gt; count;
public:
    FreqStack() {}
    
    void push(int x) {
        int sz = pos[x];
        auto pa = p{sz, x};
        auto it = lower_bound(count.begin(), count.end(), pa);
        it = count.insert(it, pa);
        pos[x] += 1;
    }
    
    int pop() {
        int result = count.front().value;
        count.pop_front();
        pos[result] -= 1;
        return result;
    }
};

&#x2F;&#x2F; 37 &#x2F; 37 test cases passed, but took too long.
&#x2F;&#x2F; Status: Time Limit Exceeded

</code></pre>
<p>I found I can use <code>priority_queue</code></p>
<pre data-lang="cpp" class="language-cpp "><code class="language-cpp" data-lang="cpp">class FreqStack {
    struct p {
        int size;
        int pos;
        int value;
        bool operator &lt;(const p &amp;other) const {
            return this-&gt;size &lt; other.size || (this-&gt;size == other.size &amp;&amp; this-&gt;pos &lt; other.pos);
        }
    };
    int pos = 0;
    unordered_map&lt;int, int&gt; count;
    priority_queue&lt;p&gt; q;
public:
    FreqStack() {}
    
    void push(int x) {
        int sz = count[x];
        auto pa = p{sz, pos++, x};
        q.push(pa);
        count[x] += 1;
    }
    
    int pop() {
        int result = q.top().value;
        q.pop();
        count[result] -= 1;
        return result;
    }
};

&#x2F;&#x2F; 37 &#x2F; 37 test cases passed.
&#x2F;&#x2F; Status: Accepted
&#x2F;&#x2F; Runtime: 180 ms
&#x2F;&#x2F; Memory Usage: 79.1 MB

</code></pre>
<p>And I learned from solution to use stack to solve it.</p>
<pre data-lang="cpp" class="language-cpp "><code class="language-cpp" data-lang="cpp">class FreqStack {
    unordered_map&lt;int, int&gt; freq;
    unordered_map&lt;int, vector&lt;int&gt;&gt; stacks;
    int maxFreq = 0;
public:    
    void push(int x) {
        freq[x] += 1;
        stacks[freq[x]].push_back(x);
        maxFreq = max(maxFreq, freq[x]);
    }
    
    int pop() {
        int value = stacks[maxFreq].back();
        stacks[maxFreq].pop_back();
        freq[value] -= 1;
        if(stacks[maxFreq].empty()) maxFreq -= 1;
        return value;
    }
};

&#x2F;&#x2F; 37 &#x2F; 37 test cases passed.
&#x2F;&#x2F; Status: Accepted
&#x2F;&#x2F; Runtime: 168 ms
&#x2F;&#x2F; Memory Usage: 79.7 MB

</code></pre>

    </div>
  </div>

        </div>

        
          <button class="sidebar-toggle" onclick="openSidebar()">O</button>
          <aside class="sidebar" name="sidebar">
            <div class="site-author" itemprop="author" itemtype="https://schema.org/Person">
              
              <img class="site-author-image" itemprop="image"
                src="https://csuwangj.github.io/ZDaily/img/avatar.png"
                alt="CSUwangj" />
              
              <p class="site-author-name unselectable">CSUwangj</p>
              <p class="site-author-quote">Just keep in mind that hacking is very rarely in a sequence.</p>
            </div>
            <div class="feed-link">
              
                <a rel="alternate" type="application/rss+xml" title="RSS" href="https://csuwangj.github.io/ZDaily/rss.xml">
                  RSS
                </a>
              
            </div>
            <div class="links-of-author">
              
                <a href="https:&#x2F;&#x2F;github.com&#x2F;CSUwangj" title="Github" class="author-link">
                  <i class="fa-brands fa-github"></i>
                </a>
              
                <a href="mailto:CSUwangj@protonmail.com" title="EMail" class="author-link">
                  <i class="fa-solid fa-envelope"></i>
                </a>
              
            </div>
            <div class="links-of-blogroll">
              
                <a href="https:&#x2F;&#x2F;CSUwangj.github.io&#x2F;">blog</a>
              
            </div>
          </aside>
        

      </main>

      
        <footer name="footer">
          <div class="copyright">
            <span item="copyrightYear">© 2018-2022</span>
            <span class="author">CSUwangj</span>
          </div>
          <div class="powered-by">
            Powered by <a href="https://www.getzola.org/">Zola</a> Theme <a href="https://github.com/CSUwangj/DogFood">DogFood</a>
          </div>
        </footer>
      
    </body>

</html>